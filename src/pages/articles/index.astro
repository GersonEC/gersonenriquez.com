---
import { getCollection } from 'astro:content'
import Layout from '@layouts/Layout.astro';
import { Code } from 'astro:components';

const pageTitle = "About Me";

const identity = {
  firstName: "Gerson",
  country: "Italy",
  occupation: "Senior Frontend Engineer",
  hobbies: ["reading", "football", "music"],
};

const skills = ["HTML", "CSS", "JavaScript", "React", "Astro", "Writing Docs"];
const happy = true;
const finished = false;
const goal = 3;

let articles = await getCollection('articles')

const tags: string[] = []
articles.map(article => {
	article.data.tags.map(tag => {
    if (!tags.includes(tag)) tags.push(tag)
  })
})

articles = articles
  .sort((a, b) => new Date(b.data.date).valueOf() - new Date(a.data.date).valueOf())
---

<Layout title="Articles">
	<div class="">
		<div class=" flex flex-col  gap-y-20">
			{
				articles.map((article) => (
					<div>
						<div class="flex items-baseline justify-between">
							<a href={`/articles/${article.slug}`}>
								<h3 class=" text-3xl" >{article.data.title}</h3>
							</a>
							<span>{article.data.date.toLocaleDateString()}</span>
						</div>
						<h4 class=" text-gray-light">{article.data.subtitle}</h4>
						<p>{article.data.abstract}</p>
						<div>
							{
								article.data.tags.map(tag => (
									<a
										href={`/tag/${tag}`}
										class='border border-white py-1 px-2 rounded-lg'
									>
										{tag}
									</a>
								))
							}
						</div>
					</div>
				))
			}
		</ul>
	</div>
	<!-- <div>	
		<Code code={`const foo = 'bar';`} lang="js" />
		<ReactCounter client:idle />
	</div> -->
</Layout>